#include <iostream>
using namespace std;


// Класс вычисления площади прямоугольника и квадрата
class Area {                
private:
	// поля класса
	int width;    // ширина
	int length;   // длина
public:
	// класс исключений для Area
	class OverflowINT{};
	class MinusValue {};
	// перегруженный аргументами конструктор
	Area(int a, int b) {
		width = a;
		length = b;
	}
	Area(int a) {
		length = a;
	}

	// перегруженный метод вычисляющая площадь
	int rect_area(int a, int b) {
		long int ab = a * b;
		if (ab >= INT16_MAX) {
			throw OverflowINT();
		}
		else if (a < 0 || b < 0) {
			throw MinusValue();
		}
		return a * b;
	}
	int rect_area(int a) {
		long int aa = a * a;
		if (a >= INT16_MAX) {
			throw OverflowINT();
		}
		else if (a < 0) {
			throw MinusValue();
		}
		return a * a;
	}
	
};

int main() {
	setlocale(LC_ALL, "rus");
	int choose, w, l;
	
	try {
		while (true) {
			cout << "1 - вычислить площадь прямоугольника" << endl;
			cout << "2 - вычислить площадь квадрата" << endl;
			cout << "0 - выход" << endl;
			cout << "ответ пользователя: ";
			cin >> choose;
			if (choose == 1) {
				cout << "введите длину:";
				cin >> l;
				cout << "введите ширину:";
				cin >> w;

				Area area1(l, w);
				cout << "площадь прямоугольника = " << area1.rect_area(l, w) << endl;
			}
			else if (choose == 2) {
				cout << "введите длину:";
				cin >> l;
				Area area2(l);
				cout << "площадь квадрата = " << area2.rect_area(l) << endl;
			}
			else if (choose == 0) {
				exit(0);
			}
			else {
				cout << "\nнекорректный ввод. используйте цифры 1 - 2 для управления и 0 для выхода\n";
			}
			system("pause>null");
			system("cls");
		}
	}
	catch (Area::OverflowINT) {   //обработчик
		cout << "Ошибка overflow - выход за границы массива!" << endl;
	}
	catch (Area::MinusValue) {   //обработчик
		cout << "Ошибка, отрицательные значения!" << endl;
	}
    return 0;
}